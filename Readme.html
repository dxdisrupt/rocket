<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Markdown Preview</title>
<style>
body{font-family:helvetica, arial, freesans, clean, sans-serif;color:#333;line-height:1.6;font-size:14px}.markdown-body{line-height:1.6;font-size:14px}.markdown-body > *:first-child{margin-top:0 !important}.markdown-body > *:last-child{margin-bottom:0 !important}.markdown-body a.absent{color:#c00}.markdown-body h1{font-weight:700;-webkit-font-smoothing:antialiased;color:#000;font-size:28px;margin:20px 0 10px;padding:0}.markdown-body h2{font-weight:700;-webkit-font-smoothing:antialiased;color:#000;font-size:24px;border-bottom-color:#ccc;border-bottom-width:1px;border-bottom-style:solid;margin:20px 0 10px;padding:0}.markdown-body h3{font-weight:700;-webkit-font-smoothing:antialiased;font-size:18px;margin:20px 0 10px;padding:0}.markdown-body h4{font-weight:700;-webkit-font-smoothing:antialiased;font-size:16px;margin:20px 0 10px;padding:0}.markdown-body h5{font-weight:700;-webkit-font-smoothing:antialiased;font-size:14px;margin:20px 0 10px;padding:0}.markdown-body h6{font-weight:700;-webkit-font-smoothing:antialiased;color:#777;font-size:14px;margin:20px 0 10px;padding:0}.markdown-body blockquote{color:#777;border-left-color:#ddd;border-left-width:4px;border-left-style:solid;margin:15px 0;padding:0 15px}.markdown-body dl{margin:15px 0;padding:0}.markdown-body table{border-collapse:collapse;margin:15px 0;padding:0}.markdown-body pre{border-radius:3px;border:1px solid #ccc;line-height:19px;overflow:auto;font-size:13px;background-color:#f8f8f8;margin:15px 0;padding:6px 10px}.markdown-body li p.first{display:inline-block}.markdown-body dl dt{font-size:14px;font-style:italic;font-weight:700;margin:15px 0 5px;padding:0}.markdown-body dl dt:first-child{padding:0}.markdown-body dl dd{margin:0 0 15px;padding:0 15px}.markdown-body table tr{border-top-color:#ccc;border-top-width:1px;border-top-style:solid;background-color:#fff;margin:0;padding:0}.markdown-body table tr:nth-child(2n){background-color:#f8f8f8}.markdown-body img{max-width:100%}.markdown-body span.frame{overflow:hidden;display:block}.markdown-body span.frame > span{border:1px solid #ddd;width:auto;overflow:hidden;float:left;display:block;margin:13px 0 0;padding:7px}.markdown-body span.frame span img{float:left;display:block}.markdown-body span.frame span span{color:#333;clear:both;display:block;padding:5px 0 0}.markdown-body span.align-center > span{text-align:center;overflow:hidden;display:block;margin:13px auto 0}.markdown-body span.align-center span img{text-align:center;margin:0 auto}.markdown-body span.align-right > span{text-align:right;overflow:hidden;display:block;margin:13px 0 0}.markdown-body span.align-right span img{text-align:right;margin:0}.markdown-body span.float-left{overflow:hidden;margin-right:13px;float:left;display:block}.markdown-body span.float-left span{margin:13px 0 0}.markdown-body span.float-right{overflow:hidden;margin-left:13px;float:right;display:block}.markdown-body span.float-right > span{text-align:right;overflow:hidden;display:block;margin:13px auto 0}.markdown-body pre > code{border:currentColor;white-space:pre;margin:0;padding:0}.markdown-body .highlight pre{border-radius:3px;border:1px solid #ccc;line-height:19px;overflow:auto;font-size:13px;background-color:#f8f8f8;padding:6px 10px}.markdown-body p,.markdown-body li{margin:15px 0}.markdown-body ul,.markdown-body ol{padding-left:30px;margin:15px 0}.markdown-body > h2:first-child,.markdown-body > h1:first-child,.markdown-body > h1:first-child + h2{border:0 currentColor;padding-top:0;margin-top:0}.markdown-body > h3:first-child,.markdown-body > h4:first-child,.markdown-body > h5:first-child,.markdown-body > h6:first-child{padding-top:0;margin-top:0}.markdown-body h1 + p,.markdown-body h2 + p,.markdown-body h3 + p,.markdown-body h4 + p,.markdown-body h5 + p,.markdown-body h6 + p,.markdown-body ul li > :first-child,.markdown-body ol li > :first-child,.markdown-body dl dt > :first-child,.markdown-body dl dd > :first-child,.markdown-body blockquote > :first-child,.markdown-body table tr th > :first-child,.markdown-body table tr td > :first-child{margin-top:0}.markdown-body ul li > :last-child,.markdown-body ol li > :last-child,.markdown-body dl dt > :last-child,.markdown-body dl dd > :last-child,.markdown-body blockquote > :last-child,.markdown-body table tr th > :last-child,.markdown-body table tr td > :last-child{margin-bottom:0}.markdown-body table tr th,.markdown-body table tr td{border:1px solid #ccc;text-align:left;margin:0;padding:6px 13px}.markdown-body span.align-center,.markdown-body span.align-right{overflow:hidden;clear:both;display:block}.markdown-body code,.markdown-body tt{border-radius:3px;border:1px solid #eaeaea;white-space:nowrap;background-color:#f8f8f8;margin:0 2px;padding:0 5px}.markdown-body pre code,.markdown-body pre tt{border:currentColor;background-color:transparent}span.codelanguage{display:none}
</style>
</head>
<body>
<div class="markdown-body">
<p><a name="Title"></a></p>

<h1 id="Rocket_Setup">Rocket Setup</h1>

<p><a name="overview"></a></p>

<h2 id="Overview">Overview</h2>

<p>The compressed air rocket used here is based on the one presented by Make Magazine in <strong><a href="http://makezine.com/2010/07/11/how-to-building-the-compressed-air/">How-to: Building a compressed air rocket launcher</a></strong></p>

<p><a name="inventory"></a></p>

<h2 id="Inventory">Inventory</h2>

<p><img src="images/00010-inventory.png?raw=true" alt="00010-Inventory" title="Inventory">
</p>

<ol>
<li>Compression Chamber</li>
<li>Feet - Attached with Zip Ties</li>
<li>Springer Valve and Launch Tube</li>
<li>Shrader Valve to charge compression chamber</li>
<li>Bike Pump - Attaches to Shrader Valve</li>
<li>Paper &amp; Tape Rocket</li>
<li>Manual Firing Button &amp; 9v Power Supply</li>
<li>Spark Core &amp; Relay Board</li>
</ol>

<p><a name="tasks"></a></p>

<h2 id="Tasks">Tasks</h2>

<ol>
<li><a href="#Task1">Assembling the Rocket</a></li>
<li><a href="#Task2">Installing the Spark Core Windows USB Driver</a></li>
<li><a href="#Task2">Programming the Spark Core</a></li>
<li><a href="#Task3">Configuring the Spark Core</a></li>
<li><a href="#Task4">Testing the Spark Core</a></li>
</ol>

<hr>

<p><a name="Task1"></a></p>

<h2 id="Assembling_the_Rocket">Assembling the Rocket</h2>

<ol>
<li><p>Attach the <strong>Sprinkler Valve and Launch Tube</strong> (3) to the <strong>Compression Chamber</strong> (2) using the using the threaded PVC tubing extending from the compression chamber and threading it into the bottom of the sprinkler valve. </p>
<blockquote>
<p><strong>Note:</strong> Be sure that you have it threaded on tightly.  If need be use some plumbers tape to help ensure a good seal.  If the seal here is not good, air will lead out. </p>
</blockquote></li>
<li><p><strong>CAREFULLY</strong> remove the cap with the button on it from the <strong>&quot;Manual Firing Button and 9v Power Supply&quot;</strong> by twisting it back and forth while pulling it away from the tube.  </p></li>
<li><p>Inside the tube, you should find the 9V Battery and the 9V battery connector.  Connect the battery to the snap connector, the re-insert the battery in the tube and replace the cap. </p>
<blockquote>
<p><strong>Note:</strong> The 9V battery in the push button tube is what actually supplies the power for the sprinkler valve solenoid.  If you make sure to only have the battery connected when you are actively using the rocket, it should last for a very long time.  If you find that the Solenoid does not open when you push the button, you may try replacing the 9V battery in the tube. </p>
</blockquote>
<p><img src="images/01010-pushbuttonbattery.png?raw=true" alt="01010-PushButtonBattery" title="Push Button Battery">
</p>

<p><img src="images/01015-assembledtube.png?raw=true" alt="01015-AssembledTube" title="Assembled Tube">
</p></li>
<li><p>You should now be able to push the pushbutton and hear the solenoid on the sprikler valve opening and closing (faintly).  If you hold your hand on the solendoid while you repeatedly push the button, you should also be able to feel the solenoid opening and closing. </p></li>
<li><p>Attach the <strong>Bike Pump</strong> (5) to the <strong>Shrader Valve</strong> (4).  Again, ensure a good connection. </p></li>
<li><p>You can now pump the bycicle pump (just a few times for this initial test): </p>

<ul>
<li><strong>WITHOUT A ROCKET</strong> on the launch tube</li>
<li>Make sure to <strong>STAY CLEAR OF THE LAUNCH TUBE</strong></li>
</ul></li>
<li><p><strong>When you know it is safe to do so</strong>, push the manual push button, and verify that air is released from the launch tube.  <strong>Hold the push button down for five seconds to allow all of the air to escape.</strong> </p></li>
<li><p>Assuming everything has worked so far, if you have a rocket handy, and you just can't wait, go ahead and <strong>SAFELY</strong> try firing a rocket.  Remember, this is supposed to be a fun thing, not a weapon.  Please <strong>DO NOT EVER AIM THE ROCKET AT SOMEBODY</strong>. I have had MULTIPLE accidental misfires during my use of the rocket, and have been very lucky to have never injured anybody, but this can be dangerous, so please take care. </p></li>
<li><p>Here is the final assembled rocket:</p>

<p><img src="images/01020-assembledrocket.png?raw=true" alt="01020-AssembledRocket" title="Assembled Rocket">
</p></li>
</ol>

<hr>

<p><a name="Task2"></a></p>

<h2 id="Installing_the_Spark_Core_Windows_USB_Driver">Installing the Spark Core Windows USB Driver</h2>

<h3 id="span_stylecolor_090IF_YOU_ALREADY_HAVE_THE_WINDOWS_USB_DRIVER_INSTALLED_YOU_CAN_SKIP_THIS_TASKspan"><span style="color: #090">IF YOU ALREADY HAVE THE WINDOWS USB DRIVER INSTALLED YOU CAN SKIP THIS TASK</span></h3>

<p>The steps covered here are specific to configuring a Spark Core using the Command Line Interface on a Windows machine. If you will be working with the spark core from a Mac or Linux box, you can can refer to the <a href="http://docs.spark.io/" title="Spark.IO Documentation">online documentation</a> for configuring a Spark Core. </p>

<ol>
<li><p>Before you work with the Spark Core on a Windows Machine, you will need to install the Windows USB Driver.  First, you'll need to download the driver from <a href="https://s3.amazonaws.com/spark-website/Spark.zip">https://s3.amazonaws.com/spark-website/Spark.zip</a> . Download the .zip file and extract it to a folder on your computer.  </p>
<blockquote>
<p><strong>Note:</strong> You can also refer to the documentation for <a href="http://docs.spark.io/connect/#connecting-your-core-connect-over-usb">Connecting to the Spark Core via USB</a></p>
</blockquote></li>
<li><p>Connect the Spark Core to your computer via the USB, and ensure that the Spark Core is in <strong>&quot;Listening Mode&quot;</strong> by confirming that the RGB LED on the board is flashing blue.  If it isn't, hold the <strong>&quot;MODE&quot;</strong> button on the Spark Core for about three seconds until it begins flashing:</p>

<p><img src="images/02005-listeningmode.png?raw=true" alt="02005-ListeningMode" title="Listening Mode">
</p></li>
<li><p>Open your computer's <strong>&quot;Device Manager&quot;</strong>.  Under <strong>&quot;Other Devices&quot;</strong> you should see the <strong>&quot;Spark Core with WiFi&quot;</strong>.  Right click on the <strong>&quot;Spark Core with WiFi&quot;</strong> and select <strong>&quot;Update Driver Software...&quot;</strong> from the pop-up menu: </p>

<p><img src="images/02010-sparkinotherdevices.png?raw=true" alt="02010-SparkInOtherDevices" title="Spark in Other Devices">
</p></li>
<li><p>Select the &quot;Browse my computer for driver software option&quot;:</p>

<p><img src="images/02020-browse.png?raw=true" alt="02020-Browse" title="Browse">
</p></li>
<li><p>Then browse to the folder where you extracted the Spark.zip file you downloaded previously with the Windows USB driver.  (There should be a <strong>spark_core.inf</strong> and <strong>spark_core.cat</strong> file in the folder), then click <strong>&quot;Next&quot;</strong>:</p>

<p><img src="images/02030-sparkdriverfolder.png?raw=true" alt="02030-SparkDriverFolder" title="Spark Driver Folder">
</p></li>
<li><p>In the <strong>&quot;Windows Security&quot;</strong> window, click <strong>&quot;Install&quot;</strong> to install the driver:</p>

<p><img src="images/02040-install.png?raw=true" alt="02040-Install" title="Install">
</p></li>
<li><p>You should see a confirmation that the <strong>&quot;Spark Core with Wifi and Arduino Compatability&quot;</strong> driver was installed.  Click <strong>&quot;Close&quot;</strong> to close the window. </p>

<p><img src="images/02050-driverinstalled.png?raw=true" alt="02050-DriverInstalled" title="Driver Installed">
</p></li>
<li><p>Finally, back in the <strong>&quot;Device Manager&quot;</strong> you should see the Spark Core listed under <strong>&quot;Ports&quot;</strong>:</p>

<p><img src="images/02060-sparkoncomport.png?raw=true" alt="02060-SparkOnComPort" title="Spark Core on COM Port">
</p></li>
</ol>

<p>This documentation was written with the Spark-CLI version 0.4.1.  If you already have the Spark-CLI installed, you can determine its version using the following command:</p>

<p><code>npm list -g spark-cli</code></p>

<p><img src="images/02010-sparkcliversion.png?raw=true" alt="02010-SparkCliVersion" title="SparkCliVersion">
</p>

<p>In addition, you can always upgrade to the latest version of the Spark-CLI using the command: </p>

<p><code>npm update -g spark-cli</code></p>

<p><a name="Task2"></a></p>

<h2 id="Programming_the_Spark_Core">Programming the Spark Core</h2>

<p>If your spark core has not been claimed, and programmed with the &quot;relayWidget&quot; sketch, you will first need to claim your Spark Core, and deploy the code to it.  </p>

<ol>
<li><p>Follow the instructions to first <a href="http://docs.spark.io/connect/">connect your core</a>, and then to <a href="http://docs.spark.io/connect/#claiming-your-core">claim your core</a></p></li>
<li><p>Use the Spark.IO web UI to deploy the following code to your Spark: </p></li>
</ol>

<span class="codelanguage">C++</span><pre><code class="C++"><span style="color:#0000FF">int</span> relayPin[4] = {D0,D1,D2,D3};

<span style="color:#0000FF">int</span> relayState[4] = {LOW,LOW,LOW,LOW};

<span style="color:#0000FF">void</span> setup()
{
   <span style="color:#008000">//Initilize the relay control pins as output, and their state</span>
   <span style="color:#0000FF">for</span>(<span style="color:#0000FF">int</span> r = 0; r &lt;= 3; r++)
   {
       pinMode(relayPin[r], OUTPUT);
       digitalWrite(relayPin[r],relayState[r]);
   }

   <span style="color:#008000">//register the cycle relay function</span>
   Spark.function(<span style="color:#8B0000">&quot;cycleRelay&quot;</span>, cycleRelay);

   Serial.begin(9600);
}

<span style="color:#0000FF">void</span> loop()
{
   <span style="color:#008000">// This loops for ever</span>
}

<span style="color:#0000FF">int</span> cycleRelay(String command)
{
    Serial.print(<span style="color:#8B0000">&quot;command: &quot;</span>);
    Serial.println(command);    
    <span style="color:#008000">//parse the relay number, minus 1 because pin #s start at 0</span>
    <span style="color:#0000FF">int</span> relayNumber = command.charAt(1) - &#39;0&#39; - 1;
    <span style="color:#008000">//do a sanity check, if we didn&#39;t get a good number, exit</span>
    <span style="color:#0000FF">if</span>(relayNumber &lt; 0 || relayNumber &gt; 3) {
      Serial.print(<span style="color:#8B0000">&quot;Relay # not good:&quot;</span>);
      Serial.println(relayNumber);
      <span style="color:#0000FF">return</span> -1;
    }

    Serial.print(<span style="color:#8B0000">&quot;Relay Number: &quot;</span>);
    Serial.println(relayNumber);

    <span style="color:#008000">//next, get the delay, if none, default to 100ms</span>
    <span style="color:#0000FF">int</span> pause=100;
    <span style="color:#0000FF">int</span> comma = command.indexOf(&#39;,&#39;);
    <span style="color:#0000FF">if</span>(comma &gt; -1) {
      String pauseString = command.substring(comma+1, command.length());
      Serial.print(<span style="color:#8B0000">&quot;pauseString: &quot;</span>);
      Serial.println(pauseString);
      pause = pauseString.toInt(); 
    }


    Serial.print(<span style="color:#8B0000">&quot;comma: &quot;</span>);
    Serial.print(comma);
    Serial.print(<span style="color:#8B0000">&quot; relay: &quot;</span>);
    Serial.print(relayNumber);
    Serial.print(<span style="color:#8B0000">&quot; delay: &quot;</span>);
    Serial.println(pause);

    toggleRelay(relayNumber);
    delay(pause);
    toggleRelay(relayNumber);

    <span style="color:#0000FF">return</span> 1;
}

<span style="color:#0000FF">void</span> toggleRelay(<span style="color:#0000FF">int</span> relay) {
    relayState[relay] = (relayState[relay] == HIGH) ? LOW : HIGH;
    digitalWrite(relayPin[relay],relayState[relay]);
}
</code></pre>

<hr>

<p><a name="Task3"></a></p>

<h2 id="Configuring_the_Spark_Core">Configuring the Spark Core</h2>

<ol>
<li><p>Make sure that you have installed the Windows Driver for Spark Core: <a href="https://s3.amazonaws.com/spark-website/Spark.zip">https://s3.amazonaws.com/spark-website/Spark.zip</a></p></li>
<li><p>Install the Spark Command Line tools <a href="http://docs.spark.io/cli/">using these instructions</a></p></li>
<li><p>Connect your Spark Core to your PC via USB</p></li>
<li><p>Ensure the Spark Core is in <a href="http://docs.spark.io/connect/">Listening Mode</a> by pressing the <strong>&quot;MODE&quot;</strong> button for three seconds, until the led begins to flash blue.</p></li>
<li><p>From a command prompt, run <strong>&quot;spark setup wifi&quot;</strong> and follow the prompts to configure the WiFi connection you want the spark to use </p>
<blockquote>
<p><strong>Note:</strong> Some MiFi adapters, and other networks take the user to a start screen on the first load.  If connecting to your mifi, the Spark might fail to connect the FIRST time.  Try cycling the power on your Spark Core to get it to restart and connect.  </p>
</blockquote>
<p><img src="images/03010-sparksetupwifi.png?raw=true" alt="03010-SparkSetupWifi" title="spark setup wifi">
</p></li>
</ol>

<hr>

<p><a name="Task4"></a></p>

<h2 id="Testing_the_Spark_Core">Testing the Spark Core</h2>

<hr>

</div>
</body>
</html>
